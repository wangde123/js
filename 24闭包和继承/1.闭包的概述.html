<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

</body>

</html>
<script>
    // 一.闭包的概述
    // 1.ES(JS)的数据类型 - 八种数据类型
    // 1.1.基本类型：number/string/boolean/null/undefined/Symbol/BigInt
    // 1.2.引用类型：object

    // BigInt类型：ES11新增的数据类型。
    // JS表示比较大的数据时，要么产生误差，要么采用科学计数法。
    // BigInt数据类型提供了一种方法来表示大于2^53-1的整数。BigInt可以表示任意大的整数
    // BigInt数据类型比Number类型支持更大的整数值
    // console.log(9007199254740999) //9007199254741000
    // console.log(9007199254740993 === 9007199254740992) //true

    // BigInt类型的使用

    // 1.在整数的末尾追加n
    // console.log(9007199254740999n) //9007199254740999  vscode编译器不能支持，但是浏览器是支持的。
    // 2.BigInt类型的数字可以进行任意加减乘除取余操作，但是不能和普通的数字进行运算。

    // 3.传递给BigInt()的参数将自动转换为BigInt类型
    // console.log(BigInt(333)); //333n

    // 4.案例：
    // let n1 = 9999999999999999999999;
    // let n2 = 9999999999999999999999999999999999;
    // console.log(n1 * n2); //9.999999999999999e+55
    // let sum = BigInt(n1) * BigInt(n2);
    // console.log(sum); //99999999999999994557523098704281600000000000000000000000n

    // 二.作用域
    // 1.全局：应用于整个js文档  变量：var let
    // 2.局部：应用函数内部  变量：var
    // 3.块级：应用于代码块内({}) 变量：let

    // 三.闭包的形成。
    // 闭包的形成与变量的作用域以及变量的生存周期密切相关.
    // 变量的作用域，就是指变量的有效范围。
    // 生存周期(声明到销毁的过程)对于全局变量是永久的，除非我们主动销毁这个全局变量，而对于在函数内用 var关键字声明的局部变量来说，当退出函数时，它们都会随着函数调用的结束而被销毁。

    // 总结：全局变量一直存在，少用，函数内部的变量(局部变量)用完即销毁，可以用。

    // 四.了解浏览器的垃圾回收机制。
    // 关闭浏览器时，上面的一切都将不存在，讨论的是代码执行的状态。
    // 1.标记清除
    // 浏览器在运行的时候会给存储在内存中的所有变量都加上标记
    // 去掉环境中的变量以及被环境中引用的变量的标记
    // 如果还有变量有标记，就会被视为准备删除的变量
    // 垃圾回收机制完成内存的清除工作，销毁那些带标记的变量，并回收他们所占用的内存空间

    // 2.引用计数
    // 声明了一个变量并将一个引用类型的值赋值给这个变量，这个引用类型值引用次数就是1
    // 同一个值又被赋值另一个变量，这个引用类型的值引用次数加1
    // 当包含这个引用类型值得变量又被赋值另一个值了，那么这个引用类型的值的引用次数减一
    // 当引用次数变成0时， 说明这个值需要解除引用
    // 当垃圾回收机制下次运行时，它就会释放引用次数为0的值所占用的内存


    // 五.闭包的概念 - 函数嵌套函数
    // 闭包就是能够读取其他函数内部变量的函数。由于在Javascript语言中，只有函数内部的子函数才能读取局部变量，因此可以把闭包简单理解成"定义在一个函数内部的函数"。
    //外层函数调用后，外层函数的函数作用域对象被内层函数引用的无法释放，形成闭包

    function fn() {
        var a = 10;

        function fn1() {
            console.log(a); //10
        }
        fn1();
    }
    fn();
    
</script>