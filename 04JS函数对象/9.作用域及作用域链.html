<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body></body>
</html>
<script>
  // 作用域及作用域链
  // 一.作用域
  // 1.概念：任何程序设计语言都有作用域的概念，简单的说，作用域就是变量与函数的可访问范围(变量和函数能否直接找到)，即作用域控制着变量与函数的可见性和生命周期(变量从创建到销毁的过程)。

  // var a = 100;
  // var a = 200; //覆盖上面，重新声明。
  // console.log(a); //200

  // 2.全局作用域：声明的变量能在整个script(js文档)里面使用，全局变量很容易被覆盖，不建议使用太多。
  // var n = 1; //全局变量
  // //全局函数
  // var fn = function () {
  //   console.log("我是函数");
  //   console.log(n);
  // };

  // fn();

  // 3.局部作用域：只对函数内部有效，即只能在本变量声明的函数内部调用。
  // 全局变量一直存在内层中，局部变量函数调用结束就自动被浏览器回收。
  // var a = 1; //全局变量，大家都可以用
  // function fn() {
  //   var b = 2; //局部变量，只能给函数内部使用，函数外面无法获取，函数是半透明的，看得见外面，外面看不见里面。
  //   console.log(a); //1
  //   console.log(b); //2
  // }
  // fn();
  // console.log(a); //1
  // console.log(b); //报错，外面无法获取函数内部声明的变量。 ReferenceError: b is not defined

  // function a() {
  //   //局部函数
  //   function b() {
  //     console.log("我是b函数里面的输出");
  //   }
  //   b(); //这里是ok的
  // }
  // a();
  // b(); //报错，ReferenceError: b is not defined  函数内部的变量或函数外部都无法获取。

  // 二.作用域链 - 面试
  // 作用域链：通俗地讲，当执行函数时，总是先从函数内部找寻局部变量如果内部找不到（函数的局部作用域没有），则会向创建函数的作用域（声明函数的作用域）寻找，依次向上查找。即在函数体内，局部变量的优先级高于同名的全局变量

  // 白话解读：函数内部输出某个变量的值，先从当前这个函数内部查找，如果内部找不到，向函数的外面逐级向上查找，一直找到全局作用域内，如果最后找不到，报错。
  var num = 1;
  function a() {
    var num = 2;
    function b() {
      var num = 3;
      function c() {
        var num = 4;
        function d() {
          var num = 5;
          console.log(num);
        }
        d();
      }
      c();
    }
    b();
  }

  a();
</script>
